import{r as S,j as s}from"./index-DXUichdn.js";import{g as B,c as C,k as j}from"./KcPage-DTvYue0j.js";import{u as A}from"./useIsPasswordRevealed-Pcc4MubB.js";import{u as E}from"./Login.useScript-DwqOCdyn.js";import"./waitForElementMountedOnDom-qpCjLZnq.js";function U(p){const{kcContext:r,i18n:t,doUseDefaultCss:l,Template:h,classes:c}=p,{kcClsx:e}=B({doUseDefaultCss:l,classes:c}),{social:i,realm:o,url:u,usernameHidden:x,login:k,auth:I,registrationDisabled:f,messagesPerField:n,enableWebAuthnConditionalUI:y,authenticators:g}=r,{msgStr:m,msg:d}=t,[F,P]=S.useState(!1),v="authenticateWebAuthnButton",w=a=>{var N;return a?((N=r.locale)==null?void 0:N.currentLanguageTag)!=="sr"?a:{"Invalid username or password.":"Neispravno korisniÄko ime ili lozinka.","Invalid username or password":"Neispravno korisniÄko ime ili lozinka.","Invalid email address.":"Neispravna email adresa.","Invalid email address":"Neispravna email adresa."}[a]||a:""};return E({webAuthnButtonId:v,kcContext:r,i18n:t}),s.jsxs(h,{kcContext:r,i18n:t,doUseDefaultCss:l,classes:c,displayMessage:!n.existsError("username","password"),headerNode:s.jsxs(s.Fragment,{children:[s.jsx("h1",{className:"login-greeting",children:"Good to see you ðŸ‘‹"}),s.jsx("p",{className:"login-subtitle",children:"Sign in for exclusive rewards."})]}),displayInfo:o.password&&o.registrationAllowed&&!f,infoNode:s.jsx("div",{id:"kc-registration-container",className:"signup-container",children:s.jsx("div",{id:"kc-registration",children:s.jsxs("span",{className:"signup-text",children:[d("dontHaveAccount")," ",s.jsx("a",{tabIndex:8,href:u.registrationUrl,className:"signup-link",children:d("signUp")})]})})}),socialProvidersNode:s.jsx(s.Fragment,{children:o.password&&(i==null?void 0:i.providers)!==void 0&&i.providers.length!==0&&s.jsxs("div",{id:"kc-social-providers",className:e("kcFormSocialAccountSectionClass"),children:[s.jsx("div",{className:"or-divider",children:s.jsx("span",{children:d("orDivider")})}),s.jsx("ul",{className:e("kcFormSocialAccountListClass",i.providers.length>3&&"kcFormSocialAccountListGridClass"),children:i.providers.map((...[a])=>s.jsx("li",{className:"social-provider-item",children:s.jsxs("a",{id:`social-${a.alias}`,className:"social-provider-button",type:"button",href:a.loginUrl,children:[a.iconClasses&&s.jsx("i",{className:C(e("kcCommonLogoIdP"),a.iconClasses),"aria-hidden":"true"}),s.jsx("span",{className:"social-provider-text",dangerouslySetInnerHTML:{__html:j(a.displayName)}})]})},a.alias))})]})}),children:[s.jsx("div",{id:"kc-form",children:s.jsx("div",{id:"kc-form-wrapper",children:o.password&&s.jsxs("form",{id:"kc-form-login",onSubmit:()=>(P(!0),!0),action:u.loginAction,method:"post",children:[!x&&s.jsxs("div",{className:e("kcFormGroupClass"),children:[s.jsx("input",{tabIndex:2,id:"username",className:e("kcInputClass"),name:"username",defaultValue:k.username??"",type:"text",placeholder:m("usernamePlaceholder"),autoFocus:!0,autoComplete:"username","aria-invalid":n.existsError("username","password")}),n.existsError("username","password")&&s.jsx("span",{id:"input-error",className:e("kcInputErrorMessageClass"),"aria-live":"polite",dangerouslySetInnerHTML:{__html:j(w(n.getFirstError("username","password")))}})]}),s.jsxs("div",{className:e("kcFormGroupClass"),children:[s.jsx(L,{kcClsx:e,i18n:t,passwordInputId:"password",children:s.jsx("input",{tabIndex:3,id:"password",className:e("kcInputClass"),name:"password",placeholder:m("passwordPlaceholder"),type:"password",autoComplete:"current-password","aria-invalid":n.existsError("username","password")})}),x&&n.existsError("username","password")&&s.jsx("span",{id:"input-error",className:e("kcInputErrorMessageClass"),"aria-live":"polite",dangerouslySetInnerHTML:{__html:j(w(n.getFirstError("username","password")))}})]}),s.jsxs("div",{className:"form-options-row",children:[s.jsx("div",{className:"remember-me-wrapper",children:o.rememberMe&&!x&&s.jsxs("label",{className:"remember-me-label",children:[s.jsx("input",{tabIndex:5,id:"rememberMe",name:"rememberMe",type:"checkbox",defaultChecked:!!k.rememberMe}),s.jsx("span",{children:d("rememberMe")})]})}),s.jsx("div",{className:"forgot-password-wrapper",children:o.resetPasswordAllowed&&s.jsx("a",{tabIndex:6,href:u.loginResetCredentialsUrl,className:"forgot-password-link",children:d("forgotPassword")})})]}),s.jsxs("div",{id:"kc-form-buttons",className:e("kcFormGroupClass"),children:[s.jsx("input",{type:"hidden",id:"id-hidden-input",name:"credentialId",value:I.selectedCredential}),s.jsx("input",{tabIndex:7,disabled:F,className:C(e("kcButtonClass","kcButtonPrimaryClass","kcButtonBlockClass","kcButtonLargeClass"),"continue-button"),name:"login",id:"kc-login",type:"submit",value:m("continueButton")})]})]})})}),y&&s.jsxs(s.Fragment,{children:[s.jsxs("form",{id:"webauth",action:u.loginAction,method:"post",children:[s.jsx("input",{type:"hidden",id:"clientDataJSON",name:"clientDataJSON"}),s.jsx("input",{type:"hidden",id:"authenticatorData",name:"authenticatorData"}),s.jsx("input",{type:"hidden",id:"signature",name:"signature"}),s.jsx("input",{type:"hidden",id:"credentialId",name:"credentialId"}),s.jsx("input",{type:"hidden",id:"userHandle",name:"userHandle"}),s.jsx("input",{type:"hidden",id:"error",name:"error"})]}),g!==void 0&&g.authenticators.length!==0&&s.jsx(s.Fragment,{children:s.jsx("form",{id:"authn_select",className:e("kcFormClass"),children:g.authenticators.map((a,b)=>s.jsx("input",{type:"hidden",name:"authn_use_chk",readOnly:!0,value:a.credentialId},b))})}),s.jsx("br",{}),s.jsx("input",{id:v,type:"button",className:e("kcButtonClass","kcButtonDefaultClass","kcButtonBlockClass","kcButtonLargeClass"),value:m("passkey-doAuthenticate")})]})]})}function L(p){const{kcClsx:r,i18n:t,passwordInputId:l,children:h}=p,{msgStr:c}=t,{isPasswordRevealed:e,toggleIsPasswordRevealed:i}=A({passwordInputId:l});return s.jsxs("div",{className:r("kcInputGroup"),children:[h,s.jsx("button",{type:"button",className:r("kcFormPasswordVisibilityButtonClass"),"aria-label":c(e?"hidePassword":"showPassword"),"aria-controls":l,onClick:i,children:s.jsx("i",{className:r(e?"kcFormPasswordVisibilityIconHide":"kcFormPasswordVisibilityIconShow"),"aria-hidden":!0})})]})}export{U as default};
