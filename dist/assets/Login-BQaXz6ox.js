import{r as F,j as s}from"./index-DXUichdn.js";import{g as S,c as v,k as b}from"./KcPage-DTvYue0j.js";import{u as A}from"./useIsPasswordRevealed-Pcc4MubB.js";import{u as B}from"./Login.useScript-DwqOCdyn.js";import"./waitForElementMountedOnDom-qpCjLZnq.js";function G(p){var r;const{kcContext:c,i18n:n,doUseDefaultCss:u,Template:h,classes:d}=p,{kcClsx:e}=S({doUseDefaultCss:u,classes:d}),{social:l,realm:t,url:m,usernameHidden:j,login:k,auth:I,registrationDisabled:N,messagesPerField:o,enableWebAuthnConditionalUI:O,authenticators:x}=c,{msg:a,msgStr:C}=n,[f,y]=F.useState(!1),w="authenticateWebAuthnButton";return B({webAuthnButtonId:w,kcContext:c,i18n:n}),s.jsxs(h,Object.assign({kcContext:c,i18n:n,doUseDefaultCss:u,classes:d,displayMessage:!o.existsError("username","password"),headerNode:a("loginAccountTitle"),displayInfo:t.password&&t.registrationAllowed&&!N,infoNode:s.jsx("div",Object.assign({id:"kc-registration-container"},{children:s.jsx("div",Object.assign({id:"kc-registration"},{children:s.jsxs("span",{children:[a("noAccount")," ",s.jsx("a",Object.assign({tabIndex:8,href:m.registrationUrl},{children:a("doRegister")}))]})}))})),socialProvidersNode:s.jsx(s.Fragment,{children:t.password&&(l==null?void 0:l.providers)!==void 0&&l.providers.length!==0&&s.jsxs("div",Object.assign({id:"kc-social-providers",className:e("kcFormSocialAccountSectionClass")},{children:[s.jsx("hr",{}),s.jsx("h2",{children:a("identity-provider-login-label")}),s.jsx("ul",Object.assign({className:e("kcFormSocialAccountListClass",l.providers.length>3&&"kcFormSocialAccountListGridClass")},{children:l.providers.map((...[i,,g])=>s.jsx("li",{children:s.jsxs("a",Object.assign({id:`social-${i.alias}`,className:e("kcFormSocialAccountListButtonClass",g.length>3&&"kcFormSocialAccountGridItem"),type:"button",href:i.loginUrl},{children:[i.iconClasses&&s.jsx("i",{className:v(e("kcCommonLogoIdP"),i.iconClasses),"aria-hidden":"true"}),s.jsx("span",{className:v(e("kcFormSocialAccountNameClass"),i.iconClasses&&"kc-social-icon-text"),dangerouslySetInnerHTML:{__html:b(i.displayName)}})]}))},i.alias))}))]}))})},{children:[s.jsx("div",Object.assign({id:"kc-form"},{children:s.jsx("div",Object.assign({id:"kc-form-wrapper"},{children:t.password&&s.jsxs("form",Object.assign({id:"kc-form-login",onSubmit:()=>(y(!0),!0),action:m.loginAction,method:"post"},{children:[!j&&s.jsxs("div",Object.assign({className:e("kcFormGroupClass")},{children:[s.jsx("label",Object.assign({htmlFor:"username",className:e("kcLabelClass")},{children:t.loginWithEmailAllowed?t.registrationEmailAsUsername?a("email"):a("usernameOrEmail"):a("username")})),s.jsx("input",{tabIndex:2,id:"username",className:e("kcInputClass"),name:"username",defaultValue:(r=k.username)!==null&&r!==void 0?r:"",type:"text",autoFocus:!0,autoComplete:"username","aria-invalid":o.existsError("username","password")}),o.existsError("username","password")&&s.jsx("span",{id:"input-error",className:e("kcInputErrorMessageClass"),"aria-live":"polite",dangerouslySetInnerHTML:{__html:b(o.getFirstError("username","password"))}})]})),s.jsxs("div",Object.assign({className:e("kcFormGroupClass")},{children:[s.jsx("label",Object.assign({htmlFor:"password",className:e("kcLabelClass")},{children:a("password")})),s.jsx(L,Object.assign({kcClsx:e,i18n:n,passwordInputId:"password"},{children:s.jsx("input",{tabIndex:3,id:"password",className:e("kcInputClass"),name:"password",type:"password",autoComplete:"current-password","aria-invalid":o.existsError("username","password")})})),j&&o.existsError("username","password")&&s.jsx("span",{id:"input-error",className:e("kcInputErrorMessageClass"),"aria-live":"polite",dangerouslySetInnerHTML:{__html:b(o.getFirstError("username","password"))}})]})),s.jsxs("div",Object.assign({className:e("kcFormGroupClass","kcFormSettingClass")},{children:[s.jsx("div",Object.assign({id:"kc-form-options"},{children:t.rememberMe&&!j&&s.jsx("div",Object.assign({className:"checkbox"},{children:s.jsxs("label",{children:[s.jsx("input",{tabIndex:5,id:"rememberMe",name:"rememberMe",type:"checkbox",defaultChecked:!!k.rememberMe})," ",a("rememberMe")]})}))})),s.jsx("div",Object.assign({className:e("kcFormOptionsWrapperClass")},{children:t.resetPasswordAllowed&&s.jsx("span",{children:s.jsx("a",Object.assign({tabIndex:6,href:m.loginResetCredentialsUrl},{children:a("doForgotPassword")}))})}))]})),s.jsxs("div",Object.assign({id:"kc-form-buttons",className:e("kcFormGroupClass")},{children:[s.jsx("input",{type:"hidden",id:"id-hidden-input",name:"credentialId",value:I.selectedCredential}),s.jsx("input",{tabIndex:7,disabled:f,className:e("kcButtonClass","kcButtonPrimaryClass","kcButtonBlockClass","kcButtonLargeClass"),name:"login",id:"kc-login",type:"submit",value:C("doLogIn")})]}))]}))}))})),O&&s.jsxs(s.Fragment,{children:[s.jsxs("form",Object.assign({id:"webauth",action:m.loginAction,method:"post"},{children:[s.jsx("input",{type:"hidden",id:"clientDataJSON",name:"clientDataJSON"}),s.jsx("input",{type:"hidden",id:"authenticatorData",name:"authenticatorData"}),s.jsx("input",{type:"hidden",id:"signature",name:"signature"}),s.jsx("input",{type:"hidden",id:"credentialId",name:"credentialId"}),s.jsx("input",{type:"hidden",id:"userHandle",name:"userHandle"}),s.jsx("input",{type:"hidden",id:"error",name:"error"})]})),x!==void 0&&x.authenticators.length!==0&&s.jsx(s.Fragment,{children:s.jsx("form",Object.assign({id:"authn_select",className:e("kcFormClass")},{children:x.authenticators.map((i,g)=>s.jsx("input",{type:"hidden",name:"authn_use_chk",readOnly:!0,value:i.credentialId},g))}))}),s.jsx("br",{}),s.jsx("input",{id:w,type:"button",className:e("kcButtonClass","kcButtonDefaultClass","kcButtonBlockClass","kcButtonLargeClass"),value:C("passkey-doAuthenticate")})]})]}))}function L(p){const{kcClsx:r,i18n:c,passwordInputId:n,children:u}=p,{msgStr:h}=c,{isPasswordRevealed:d,toggleIsPasswordRevealed:e}=A({passwordInputId:n});return s.jsxs("div",Object.assign({className:r("kcInputGroup")},{children:[u,s.jsx("button",Object.assign({type:"button",className:r("kcFormPasswordVisibilityButtonClass"),"aria-label":h(d?"hidePassword":"showPassword"),"aria-controls":n,onClick:e},{children:s.jsx("i",{className:r(d?"kcFormPasswordVisibilityIconHide":"kcFormPasswordVisibilityIconShow"),"aria-hidden":!0})}))]}))}export{G as default};
